// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Mitra {
  id                 Int     @id @default(autoincrement())
  namaLengkap        String
  posisi             String?
  statusSeleksi      String?
  posisiDaftar       String?
  alamatDetail       String?
  alamatProv         Int?
  alamatKab          Int?
  alamatKec          Int?
  alamatDesa         Int?
  tempatTanggalLahir String?
  jenisKelamin       String?
  pendidikan         String?
  pekerjaan          String?
  deskripsiPekerjaan String?
  noTelp             String?
  sobatId            String @unique
  email              String?
  honors Honor[]
  KegiatanMitra KegiatanMitra[]
}

model Honor {
  id_honor   Int     @id @default(autoincrement())
  sobatId  String
  januari    Int @default(0)
  februari   Int @default(0)
  maret      Int @default(0)
  april      Int @default(0)
  mei        Int @default(0)
  juni       Int @default(0)
  juli       Int @default(0)
  agustus    Int @default(0)
  september  Int @default(0)
  oktober    Int @default(0)
  november   Int @default(0)
  desember   Int @default(0)
  tahun   Int

  mitra   Mitra? @relation(fields: [sobatId], references: [sobatId])
  @@unique([sobatId, tahun], name: "sobatId_tahun")
}

model KegiatanMitra {
  id          Int      @id @default(autoincrement())
  bulan       String
  tanggal     String
  tim         String?
  nama_survei String
  nama_survei_sobat String?
  kegiatan    String?
  pcl_pml_olah String?
  nama_petugas String?
  id_sobat    String
  satuan      String?
  volum       Int?
  harga_per_satuan   Decimal? @db.Decimal(12,2)
  jumlah      Decimal? @db.Decimal(12,2)
  konfirmasi  String?
  flag_sobat  String?
  tahun       Int

  kegiatanId        String?
  kegiatanMaster    Kegiatan?   @relation(fields: [kegiatanId], references: [kodeKegiatan])
  mitra Mitra? @relation(fields: [id_sobat], references: [sobatId])
}

model BatasHonor{
  id Int @id @default(autoincrement())
  nama_posisi String
  biaya Int
  keterangan String?
  flag Int?
}

model Files{
  id Int @id @default(autoincrement())
  filename String
  originalName String
  mimetype String
  size Int
  path String
  uploadDate DateTime
  description String?
}

model Kegiatan{
  id Int @id @default(autoincrement())
  bulan       String
  tanggal     String
  tim         String?
  nama_survei String
  nama_survei_sobat String?
  kegiatan    String?
  tahun Int
  kodeKegiatan  String  @unique

  mitra             KegiatanMitra[]
}